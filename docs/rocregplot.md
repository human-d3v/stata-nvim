## Syntax

Plot ROC curve after nonparametric analysis

`rocregplot` \[`, common_options boot_options`\]

Plot ROC curve after parametric analysis using bootstrap

`rocregplot` \[`, probit_options common_options boot_options`\]

Plot ROC curve after parametric analysis using maximum likelihood

`rocregplot` \[`, probit_options common_options`\]

probit\_options

Description

Main

`at(`[varname](http://www.stata.com/help.cgi?varname)`=#`
\[[varname](http://www.stata.com/help.cgi?varname)`=# ...`\]`)`

value of specified covariates

\*

`roc(numlist)`

show estimated ROC values for given false-positive rates

\*

`invroc(numlist)`

show estimated false-positive rates for given ROC values

`level(#)`

set confidence level; default is `level(95)`

and mean of unspecified covariates

Curve

`line#opts(cline_options)`

affect rendition of ROC curve `#`

\* Only one of `roc()` or `invroc()` may be specified.

| common\_options                         |                                      | Description                                                                                                                                                           |
|-----------------------------------------|--------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Main                                    |                                      |                                                                                                                                                                       |
|                                         | `classvars(varlist)`                 | restrict plotting of ROC curves to specified classifiers                                                                                                              |
|                                         | `norefline`                          | suppress plotting the reference line                                                                                                                                  |
| Scatter                                 |                                      |                                                                                                                                                                       |
|                                         | `plot#opts(scatter_options)` | affect rendition of the classifier `#`s false-positive rate and ROC scatter points; not allowed with `at()`                                                           |
| Reference line                          |                                      |                                                                                                                                                                       |
|                                         | `rlopts(cline_options)`              | affect rendition of the reference line                                                                                                                                |
| Y axis, X axis, Titles, Legend, Overall |                                      |                                                                                                                                                                       |
|                                         | `twoway_options`                     | any options other than `by()` documented in [<strong>[G-3]</strong> <em>twoway_options</em>](http://www.stata.com/help.cgi?twoway_options) |

| boot\_options                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                           | Description                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|-----------------------------------------------------------------------------------------------------------------|
| Bootstrap                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                           |                                                                                                                 |
| \*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `bfile(filename)`         | load dataset containing bootstrap replicates from `rocreg`                                                      |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `btype(n` \| `p` \| `bc)` | plot normal-based (`n`), percentile (`p`), or bias-corrected (`bc`) confidence intervals; default is `btype(n)` |
| \* `bfile()` is only allowed with parametric analysis using bootstrap inference; in which case this option is required with `roc()` or `invroc()`. <span options="menu">{marker menu}_{nobreak None} {title None:Menu} {phang None} **Statistics &gt; Epidemiology and related &gt; ROC analysis &gt;** **ROC curves after rocreg** <span options="description">{marker description}_{nobreak None} {title None:Description} {pstd None} Under parametric estimation, `rocregplot` plots the fitted ROC curves for specified covariate values and classifiers. If `rocreg, probit` or `rocreg, probit ml` were previously used, the false-positive rates (for specified ROC values) and ROC values (for specified false-positive rates) for each curve may also be plotted, along with confidence intervals. {pstd None} Under nonparametric estimation, `rocregplot` will plot the fitted ROC curves using the `_fpr_`\* and `_roc_`\* variables produced by `rocreg`. Point estimates and confidence intervals for false-positive rates and ROC values that were computed in `rocreg` may be plotted as well. <span options="linkspdf">{marker linkspdf}_{nobreak None} {title None:Links to PDF documentation} [Quick start](http://www.stata.com/manuals14/rrocregplotquickstart.pdf) [Remarks and examples](http://www.stata.com/manuals14/rrocregplotremarksandexamples.pdf) [Methods and formulas](http://www.stata.com/manuals14/rrocregplotmethodsandformulas.pdf) {pstd None} The above sections are not included in this help file. <span options="options_probit">{marker options\_probit}_{nobreak None} {title None:probit\_options} {dlgtab None:Main} {phang None} `at(varname=# ...)` requests that the covariates specified by `varname` be set to `#`. By default, `rocregplot` evaluates the function by setting each covariate to its mean value. This option causes the ROC curve to be evaluated at the value of the covariates listed in `at()` and at the mean of all unlisted covariates. {pmore None} `at1(varname=# ...)`, `at2(varname=# ...)`, ..., `at10(varname=# ...)` specify that ROC curves (up to 10) be plotted on the same graph. `at1()`, `at2()`, ..., `at10()` work like the `at()` option. They request that the function be evaluated at the value of the covariates specified and at the mean of all unlisted covariates. `at1()` specifies the values of the covariates for the first curve, `at2()` specifies the values of the covariates for the second curve, and so on. {phang None} `roc(numlist)` specifies that estimated ROC values for given false-positive rates be graphed. {phang None} `invroc(numlist)` specifies that estimated false-positive rates for given ROC values be graphed. {phang None} `level(#)` specifies the confidence level, as a percentage, for confidence intervals. The default is `level(95)` or as set by [<strong>set level</strong>](http://www.stata.com/help.cgi?set%20level). `level()` may be specified with either `roc()` or `invroc()`. {dlgtab None:Curve} {phang None} `line#opts(cline_options)` affects the rendition of ROC curve `#`. See [<strong>[G-3]</strong> <em>cline_options</em>](http://www.stata.com/help.cgi?cline_options). <span options="options_common">{marker options\_common}_{nobreak None} {title None:common\_options} {dlgtab None:Main} {phang None} `classvars(varlist)` restricts plotting ROC curves to specified classification variables. {phang None} `norefline` suppresses plotting the reference line. {dlgtab None:Scatter} {phang None} `plot#opts(scatter_options)` affects the rendition of classifier `#`'s false-positive rate and ROC scatter points. This option applies only to non-ROC covariate estimation graphing. See [<strong>[G-2] graph twoway scatter</strong>](http://www.stata.com/help.cgi?scatter). {dlgtab None:Reference line} {phang None} `rlopts(cline_options)` affects the rendition of the reference line. See [<strong>[G-3]</strong> <em>cline_options</em>](http://www.stata.com/help.cgi?cline_options). {dlgtab None:Y axis, X axis, Titles, Legend, Overall} {phang None} `twoway_options` are any of the options documented in [<strong>[G-3]</strong> <em>twoway_options</em>](http://www.stata.com/help.cgi?twoway_options), excluding `by()`. These include options for titling the graph (see [<strong>[G-3]</strong> <em>title_options</em>](http://www.stata.com/help.cgi?title_options)) and options for saving the graph to disk (see [<strong>[G-3]</strong> <em>saving_option</em>](http://www.stata.com/help.cgi?saving_option)). <span options="options_boot">{marker options\_boot}_{nobreak None} {title None:boot\_options} {dlgtab None:Bootstrap} {phang None} `bfile(filename)` uses bootstrap replicates of parameters from `rocreg` stored in `filename` to estimate standard errors and confidence intervals of predictions. `bfile()` must be specified with either `roc()` or `invroc()` if parametric estimation with bootstrapping was used. {phang None} `btype(n` \| `p` \| `bc)` indicates the desired type of confidence interval rendering. `n` draws normal-based, `p` draws percentile, and `bc` draws bias-corrected confidence intervals for specified false-positive rates and ROC values in `roc()` and `invroc()`. The default is `btype(n)`. <span options="examples">{marker examples}_{nobreak None} {title None:Examples} {hline None} {pstd None}Setup |                           |                                                                                                                 |
| `. webuse hanley`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                           |                                                                                                                 |

Fit a smooth ROC curve assuming a binormal model

    rocreg disease rating, probit ml
    rocregplot

Fit a nonparametric ROC curve

    rocreg disease rating, bseed(32)
    rocregplot

------------------------------------------------------------------------

Setup of dataset with multiple covariates

    webuse nnhs, clear

Fit a binormal ROC curve to data, with control/ROC covariates and
bootstrap inference

    rocreg d y1, ctrlcov(currage male) ctrlmodel(linear) roccov(currage) cluster(id) bseed(56930) breps(50) bsave(nnhs2y1) probit
    rocregplot, at1(currage=50) at2(currage=40) at3(currage=30) 

Fit a binormal ROC curve to data, with control/ROC covariates and
maximum likelihood inference

    rocreg d y1, ctrlcov(currage male) ctrlmodel(linear) roccov(currage) cluster(id) probit ml
    rocregplot, at1(currage=50) at2(currage=40) at3(currage=30) 

------------------------------------------------------------------------
