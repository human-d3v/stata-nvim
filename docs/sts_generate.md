## Syntax

`sts generate`
[newvar](http://www.stata.com/help.cgi?newvar)
`=` { `s` \| `se(s)` \| `h` \| `se(lls)`
\| `lb(s)` \| `ub(s)` \| `na` \| `se(na)` \| `lb(na)` \| `ub(na)` \| `n`
\| `d` }
\[[newvar](http://www.stata.com/help.cgi?newvar)
`=` {`...`} {it:...}\] {ifin} \[`, options`\]

| Options                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                      | Description                                             |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------|---------------------------------------------------------|
| Options                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                      |                                                         |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `by(varlist)`        | calculate separately for each group formed by `varlist` |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `adjustfor(varlist)` | adjust the estimates to zero values of `varlist`        |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `strata(varlist)`    | stratify on different groups of `varlist`               |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `level(#)`           | set confidence level; default is `level(95)`            |
| You must `stset` your data before using `sts generate`; see [<strong>[ST]</strong> stset](http://www.stata.com/help.cgi?stset). <span options="menu">{marker menu}_{nobreak None} {title None:Menu} {phang None} **Statistics &gt; Survival analysis &gt; Summary statistics, tests, and tables &gt;** **Create survivor, hazard, and other variables** <span options="description">{marker description}_{nobreak None} {title None:Description} {pstd None} `sts generate` creates new variables containing the estimated survivor (failure) function, the Nelson-Aalen cumulative hazard (integrated hazard) function, and related functions. See [<strong>[ST]</strong> sts](http://www.stata.com/help.cgi?sts) for an introduction to this command. {pstd None} `sts generate` can be used with single- or multiple-record or single- or multiple-failure st data. <span options="linkspdf">{marker linkspdf}_{nobreak None} {title None:Links to PDF documentation} [Quick start](http://www.stata.com/manuals14/ststsgeneratequickstart.pdf) [Remarks and examples](http://www.stata.com/manuals14/ststsgenerateremarksandexamples.pdf) [Methods and formulas](http://www.stata.com/manuals14/ststsgeneratemethodsandformulas.pdf) {pstd None} The above sections are not included in this help file. <span options="functions">{marker functions}_{nobreak None} {title None:Functions} {dlgtab None:Main} {phang None} `s` produces the Kaplan-Meier product-limit estimate of the survivor function or, if `adjustfor()` is specified, the baseline survivor function from a Cox regression model on the `adjustfor()` variables. {phang None} `se(s)` produces the Greenwood, pointwise standard error. This option may not be used with `adjustfor()`. {phang None} `h` produces the estimated hazard component deltaH\_j = H(t\_j) - H(t\_(j-1)), where t\_j is the current failure time and t\_(j-1) is the previous one. This is mainly a utility function used to calculate the estimated cumulative hazard, H(t\_j), yet you can estimate the hazard via a kernel smooth of the deltaH\_j; see [<strong>[ST]</strong> sts graph](http://www.stata.com/help.cgi?sts_graph). It is recorded at all the points at which a failure occurs and is computed as d\_j/n\_j, where d\_j is the number of failures occurring at time t\_j and n\_j is the number at risk at t\_j before the occurrence of the failures. {phang None} `se(lls)` produces the standard error of ln{-ln S(t)}. This option may not be used with `adjustfor()`. {phang None} `lb(s)` produces the lower bound of the confidence interval for S(t) based on ln{-ln S(t)}. This option may not be used with `adjustfor()`. {phang None} `ub(s)` produces the corresponding upper bound. This option may not be used with `adjustfor()`. {phang None} `na` produces the Nelson-Aalen estimate of the cumulative hazard function. This option may not be used with `adjustfor()`. {phang None} `se(na)` produces the pointwise standard error for the Nelson-Aalen estimate of the cumulative hazard function, H(t). This option may not be used with `adjustfor()`. {phang None} `lb(na)` produces the lower bound of the confidence interval for H(t) based on the log-transformed cumulative hazard function. This option may not be used with `adjustfor()`. {phang None} `ub(na)` produces the corresponding upper bound. This option may not be used with `adjustfor()`. {phang None} `n` produces n\_j, the number at risk just before time t\_j. This option may not be used with `adjustfor()`. {phang None} `d` produces d\_j, the number failing at time t\_j. This option may not be used with `adjustfor()`. <span options="options">{marker options}_{nobreak None} {title None:Options} {dlgtab None:Options} {phang None} `by(varlist)` performs a separate calculation for each by-group. By-groups are identified by equal values of the variables in `varlist`. `by()` may not be combined with `strata()`. {phang None} `adjustfor(varlist)` adjusts the estimate of the survivor (failure) or hazard function to that for 0 values of `varlist`. This option is available only with functions `s` or `h`. See [<strong>[ST]</strong> sts graph](http://www.stata.com/help.cgi?sts_graph) for an example of how to adjust for values different from 0. {pmore None} If you specify `adjustfor()` with `by()`, `sts` fits separate Cox regression models for each group, using the `adjustfor()` variables as the covariates. The separately calculated baseline survivor functions are then retrieved. {pmore None} If you specify `adjustfor()` with `strata()`, `sts` fits a stratified-on-group Cox regression model using the `adjustfor()` variables as covariates. The stratified, baseline survivor function is then retrieved. {phang None} `strata(varlist)` requests estimates of the survivor (failure) or hazard functions stratified on variables in `varlist`. It requires specifying `adjustfor()` and may not be combined with `by()`. {phang None} `level(#)` specifies the confidence level, as a percentage, for the `lb(s)`, `ub(s)`, `lb(na)`, and `ub(na)` functions. The default is `level(95)` or as set by [<strong>set level</strong>](http://www.stata.com/help.cgi?set%20level). <span options="examples">{marker examples}_{nobreak None} {title None:Examples} {pstd None}Setup |                      |                                                         |
| `. webuse stan3`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                      |                                                         |
| `. stset` {pstd None}Create variable `surv` containing the estimate of the survivor function                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                      |                                                         |
| `. sts generate surv = s` {pstd None}Obtain the estimates of the survivor functions for the two categories of `posttran` and save them in variable `surv_by`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                      |                                                         |
| `. sts generate surv_by = s, by(posttran)` {pstd None}Obtain the estimates of the survivor functions stratified on `posttran` and adjusted for `age`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                      |                                                         |
| `. sts generate surv_adj = s, strata(posttran) adjustfor(age)` {pstd None}Create variables `cumh` and `cumh_se` containing the Nelson-Aalen estimates and pointwise standard error for the Nelson-Aalen estimate of the cumulative hazard function                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                      |                                                         |
| `. sts generate cumh = na cumh_se = se(na)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                      |                                                         |
